## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "Currently, there is no record of player Conan interacting in the recent action log. Therefore, I will continue advancing the script from where we last left off. The next event in the current plot chain is Mouri Kogoro commenting on the sudden typhoon and the station master Kikuo and clerk Masako giving everyone towels.",
  "Player Interaction": null,
  "Decision": {
    "aid": "Mouri Kogoro",
    "x": "-speak",
    "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."
  },
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "As we are currently in scene1, we need to proceed with the script's sequence of events. Mouri Kogoro should comment on the sudden typhoon, followed by the station master Kikuo and clerk Masako giving everyone towels. There have been no player interactions by Conan in the Recent Action Log, so we should continue advancing the plot according to the script.",
  "Player Interaction": null,
  "Decision": {
    "aid": "Mouri Kogoro",
    "x": "-speak",
    "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."
  },
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "We are starting the first event in Scene 1 where Mouri comments on the sudden typhoon, and the station master Kikuo and clerk Masako give everyone towels. Since there is no player interaction in the recent action log, we can proceed with the preset script. Mouri Kogoro will start by commenting on the typhoon.",
  "Player Interaction": null,
  "Decision": {
    "aid": "Mouri Kogoro",
    "x": "-speak",
    "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."
  },
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "The current plot chain indicates that the first sub-event is Mouri Kogoro commenting on the sudden typhoon, followed by the station master Kikuo and clerk Masako giving everyone towels. To start off the scene appropriately, I will have Mouri Kogoro comment on the typhoon.",
  "Player Interaction": null,
  "Decision": {"aid": "Mouri Kogoro", "x": "-speak", "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.

## Recent Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "Mouri Kogoro has just commented on the typhoon. According to the next event in the script, Yuichi expresses his excitement about being with the famous detective, the station master Kikuo addresses everyone about the weather forecast while instructing Masako to hand out towels, and Masako complies nervously. There is no recent interaction from player character Conan, so I should proceed with the next event in the plot chain.",
  "Player Interaction": null,
  "Decision": {"aid": "Yuichi", "x": "-speak", "content": "I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]"},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]

## Recent Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "We need to advance the plot and follow the sequence as per the detailed script. Given the current action log, with Yuichi expressing excitement towards Mouri Kogoro, the next part involves Kikuo acting kindly while secretly monitoring Masako and instructing her to hand out towels. Since there has been no interruption from the player character Conan, we proceed with Kikuo's response.",
  "Player Interaction": null,
  "Decision": {"aid": "Kikuo", "x": "-speak", "content": "Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.

## Recent Action Log
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "We have begun scene 1, where Mouri Kogoro, Yuichi, Kikuo, and Masako have already initiated the conversation. According to the script, the next event involves Hitoshi reflecting on his failed life, which prompts Yuichi to pitch his loans, leading to a confrontation. Since there's no recent interaction from player Conan, we can proceed with Hitoshi's line.",
  "Player Interaction": null,
  "Decision": {"aid": "Hitoshi", "x": "-speak", "content": "Everything is like my life—just a series of sudden events and mistakes... [Sighs]"},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", true],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', True], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.
Hitoshi speak: Everything is like my life—just a series of sudden events and mistakes... [Sighs]

## Recent Action Log
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.
Hitoshi speak: Everything is like my life—just a series of sudden events and mistakes... [Sighs]

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "The recent action involved Hitoshi reflecting on his failed life, which prompts Yuichi to seize the opportunity to pitch his loans leading to a confrontation. According to the script, this next interaction involves Yuichi speaking to Hitoshi in an attempt to pitch his loans. Therefore, I will have Yuichi act next.",
  "Player Interaction": null,
  "Decision": {"aid": "Yuichi", "x": "-speak", "content": "At times like this, we have a special offer for you. No way it will go wrong."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", true],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', True], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.
Hitoshi speak: Everything is like my life—just a series of sudden events and mistakes... [Sighs]
Yuichi speak: At times like this, we have a special offer for you. No way it will go wrong.

## Recent Action Log
Hitoshi speak: Everything is like my life—just a series of sudden events and mistakes... [Sighs]
Yuichi speak: At times like this, we have a special offer for you. No way it will go wrong.

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "In the current scenario, Yuichi has tried to promote his loans to Hitoshi, leading to a confrontation. The next logical action is for Hitoshi to respond aggressively, escalating the tension. This follows the script and ensures the plot progresses smoothly as planned.",
  "Player Interaction": null,
  "Decision": {
    "aid": "Hitoshi",
    "x": "-speak",
    "content": "You scoundrel, how many people have you tricked with this nonsense? [Angrily grabs Yuichi by the collar]"
  },
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", true],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', True], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.
Hitoshi speak: Everything is like my life—just a series of sudden events and mistakes... [Sighs]
Yuichi speak: At times like this, we have a special offer for you. No way it will go wrong.
Hitoshi speak: You scoundrel, how many people have you tricked with this nonsense? [Angrily grabs Yuichi by the collar]

## Recent Action Log
Yuichi speak: At times like this, we have a special offer for you. No way it will go wrong.
Hitoshi speak: You scoundrel, how many people have you tricked with this nonsense? [Angrily grabs Yuichi by the collar]

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "The current scene involves Yuichi and Hitoshi having a confrontation about sales pitches, followed by Yuichi dropping his briefcase. To keep current plot progression and coherence, the next logical action should involve Yuichi addressing the situation with the briefcase.",
  "Player Interaction": null,
  "Decision": {
    "aid": "Yuichi",
    "x": "-speak",
    "content": "I... I wasn’t trying to deceive anyone, just sharing better loan options. [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the floor—medical insurance...]"
  },
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", true],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", true],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.
Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.


Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.
Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.


Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.
Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.


Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.
Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.
Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.

## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: ''
    Hitoshi: Complains about his failed life and despises salespeople.
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
    Morris: ''
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Noriko: ''
    Yuichi: Tries to find an opportunity to promote his loans.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: []
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "I need to advance the preset script since there is no recent interaction from Conan. The first event in the current plot chain is 'Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.' and this event is currently incomplete. Hence, the next natural action is Mouri Kogoro commenting on the typhoon and Kikuo responding by asking Masako to distribute towels.",
  "Player Interaction": null,
  "Decision": {"aid": "Mouri Kogoro", "x": "-speak", "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.
Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.


Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.
Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.


Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.
Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.


Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.
Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.
Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.

## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: ''
    Hitoshi: Complains about his failed life and despises salespeople.
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
    Morris: ''
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Noriko: ''
    Yuichi: Tries to find an opportunity to promote his loans.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: []
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "The current plot chain indicates that we are in scene 1, starting with Mouri commenting on the sudden typhoon. It is appropriate for Mouri Kogoro to start the conversation based on the script.",
  "Player Interaction": null,
  "Decision": {"aid": "Mouri Kogoro", "x": "-speak", "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "Based on the current scene and sequence of events, the initial action should involve Mouri Kogoro commenting on the sudden typhoon. This sets the stage for subsequent interactions involving the six other people and maintains the flow towards the distribution of towels by Kikuo and Masako, establishing the situation everyone is in. No player interaction is present, which means proceeding directly with the script.",
  "Player Interaction": null,
  "Decision": {"aid": "Mouri Kogoro", "x": "-speak", "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```