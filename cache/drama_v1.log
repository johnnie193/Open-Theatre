## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "Currently, there is no record of player Conan interacting in the recent action log. Therefore, I will continue advancing the script from where we last left off. The next event in the current plot chain is Mouri Kogoro commenting on the sudden typhoon and the station master Kikuo and clerk Masako giving everyone towels.",
  "Player Interaction": null,
  "Decision": {
    "aid": "Mouri Kogoro",
    "x": "-speak",
    "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."
  },
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "As we are currently in scene1, we need to proceed with the script's sequence of events. Mouri Kogoro should comment on the sudden typhoon, followed by the station master Kikuo and clerk Masako giving everyone towels. There have been no player interactions by Conan in the Recent Action Log, so we should continue advancing the plot according to the script.",
  "Player Interaction": null,
  "Decision": {
    "aid": "Mouri Kogoro",
    "x": "-speak",
    "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."
  },
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "We are starting the first event in Scene 1 where Mouri comments on the sudden typhoon, and the station master Kikuo and clerk Masako give everyone towels. Since there is no player interaction in the recent action log, we can proceed with the preset script. Mouri Kogoro will start by commenting on the typhoon.",
  "Player Interaction": null,
  "Decision": {
    "aid": "Mouri Kogoro",
    "x": "-speak",
    "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."
  },
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "The current plot chain indicates that the first sub-event is Mouri Kogoro commenting on the sudden typhoon, followed by the station master Kikuo and clerk Masako giving everyone towels. To start off the scene appropriately, I will have Mouri Kogoro comment on the typhoon.",
  "Player Interaction": null,
  "Decision": {"aid": "Mouri Kogoro", "x": "-speak", "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.

## Recent Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "Mouri Kogoro has just commented on the typhoon. According to the next event in the script, Yuichi expresses his excitement about being with the famous detective, the station master Kikuo addresses everyone about the weather forecast while instructing Masako to hand out towels, and Masako complies nervously. There is no recent interaction from player character Conan, so I should proceed with the next event in the plot chain.",
  "Player Interaction": null,
  "Decision": {"aid": "Yuichi", "x": "-speak", "content": "I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]"},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]

## Recent Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "We need to advance the plot and follow the sequence as per the detailed script. Given the current action log, with Yuichi expressing excitement towards Mouri Kogoro, the next part involves Kikuo acting kindly while secretly monitoring Masako and instructing her to hand out towels. Since there has been no interruption from the player character Conan, we proceed with Kikuo's response.",
  "Player Interaction": null,
  "Decision": {"aid": "Kikuo", "x": "-speak", "content": "Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.

## Recent Action Log
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "We have begun scene 1, where Mouri Kogoro, Yuichi, Kikuo, and Masako have already initiated the conversation. According to the script, the next event involves Hitoshi reflecting on his failed life, which prompts Yuichi to pitch his loans, leading to a confrontation. Since there's no recent interaction from player Conan, we can proceed with Hitoshi's line.",
  "Player Interaction": null,
  "Decision": {"aid": "Hitoshi", "x": "-speak", "content": "Everything is like my life—just a series of sudden events and mistakes... [Sighs]"},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", true],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', True], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.
Hitoshi speak: Everything is like my life—just a series of sudden events and mistakes... [Sighs]

## Recent Action Log
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.
Hitoshi speak: Everything is like my life—just a series of sudden events and mistakes... [Sighs]

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "The recent action involved Hitoshi reflecting on his failed life, which prompts Yuichi to seize the opportunity to pitch his loans leading to a confrontation. According to the script, this next interaction involves Yuichi speaking to Hitoshi in an attempt to pitch his loans. Therefore, I will have Yuichi act next.",
  "Player Interaction": null,
  "Decision": {"aid": "Yuichi", "x": "-speak", "content": "At times like this, we have a special offer for you. No way it will go wrong."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", true],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', True], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.
Hitoshi speak: Everything is like my life—just a series of sudden events and mistakes... [Sighs]
Yuichi speak: At times like this, we have a special offer for you. No way it will go wrong.

## Recent Action Log
Hitoshi speak: Everything is like my life—just a series of sudden events and mistakes... [Sighs]
Yuichi speak: At times like this, we have a special offer for you. No way it will go wrong.

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "In the current scenario, Yuichi has tried to promote his loans to Hitoshi, leading to a confrontation. The next logical action is for Hitoshi to respond aggressively, escalating the tension. This follows the script and ensures the plot progresses smoothly as planned.",
  "Player Interaction": null,
  "Decision": {
    "aid": "Hitoshi",
    "x": "-speak",
    "content": "You scoundrel, how many people have you tricked with this nonsense? [Angrily grabs Yuichi by the collar]"
  },
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", true],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', True], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log
Mouri Kogoro speak: Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo.
Yuichi speak: I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
Kikuo speak: Everyone, please bear with us. The weather forecast was totally wrong. Masako, please hand out towels to everyone.
Hitoshi speak: Everything is like my life—just a series of sudden events and mistakes... [Sighs]
Yuichi speak: At times like this, we have a special offer for you. No way it will go wrong.
Hitoshi speak: You scoundrel, how many people have you tricked with this nonsense? [Angrily grabs Yuichi by the collar]

## Recent Action Log
Yuichi speak: At times like this, we have a special offer for you. No way it will go wrong.
Hitoshi speak: You scoundrel, how many people have you tricked with this nonsense? [Angrily grabs Yuichi by the collar]

## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "The current scene involves Yuichi and Hitoshi having a confrontation about sales pitches, followed by Yuichi dropping his briefcase. To keep current plot progression and coherence, the next logical action should involve Yuichi addressing the situation with the briefcase.",
  "Player Interaction": null,
  "Decision": {
    "aid": "Yuichi",
    "x": "-speak",
    "content": "I... I wasn’t trying to deceive anyone, just sharing better loan options. [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the floor—medical insurance...]"
  },
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", true],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", true],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.
Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.


Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.
Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.


Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.
Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.


Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.
Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.
Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.

## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: ''
    Hitoshi: Complains about his failed life and despises salespeople.
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
    Morris: ''
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Noriko: ''
    Yuichi: Tries to find an opportunity to promote his loans.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: []
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "I need to advance the preset script since there is no recent interaction from Conan. The first event in the current plot chain is 'Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.' and this event is currently incomplete. Hence, the next natural action is Mouri Kogoro commenting on the typhoon and Kikuo responding by asking Masako to distribute towels.",
  "Player Interaction": null,
  "Decision": {"aid": "Mouri Kogoro", "x": "-speak", "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.
Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.


Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.
Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.


Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.
Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.


Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.
Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.
Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.

## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: ''
    Hitoshi: Complains about his failed life and despises salespeople.
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
    Morris: ''
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Noriko: ''
    Yuichi: Tries to find an opportunity to promote his loans.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: []
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "The current plot chain indicates that we are in scene 1, starting with Mouri commenting on the sudden typhoon. It is appropriate for Mouri Kogoro to start the conversation based on the script.",
  "Player Interaction": null,
  "Decision": {"aid": "Mouri Kogoro", "x": "-speak", "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## Task
You are a renowned director invited to serve as the lead director for an interactive drama. Your task is to direct and perform all non-player characters (NPCs) in the scene based on the current state of the narrative, providing real-time decisions that ensure the script is perfectly interpreted and the player’s interactive needs are satisfied.

## Background
One evening, due to a sudden typhoon, Conan and the Mouri family find themselves trapped in the waiting room of Da Lu Station. The other six people in the waiting room seem to have their own secrets.

## Non-player Characters
Mouri Kogoro
A famous detective who often appears perverted, untidy, greedy, and somewhat self-important. While he has a humorous side, he also cares deeply for his family and friends but is not good at expressing it.
He has a strong sense of justice, although his deductive abilities are not great. However, when it involves his friends or family, he shows excellent reasoning skills.
Father of Mouri Ran.

Asks the station master Kikuo about the next train departure.

Mouri Ran
A high school girl with a gentle and kind personality who gets along well with everyone. However, she can also be brave and courageous in dangerous situations and often uses karate or other methods to resolve crises.
Daughter of Mouri Kogoro.



Yuichi
Hokari Yuichi, a salesman. He is friendly, talkative, and proactive, showing admiration for the famous detective Mouri Kogoro and often offering unsolicited help or advice, but his true goal is to seize opportunities to promote loans.
His real identity is a fraudster, and he carries a briefcase with many brochures from different companies, which he doesn’t want anyone to see.

Tries to find an opportunity to promote his loans.

Morris
Carl Morris, a backpacker from the U.S. He is enthusiastic, optimistic, and loves to help others, often sharing his travel stories.
However, beneath the backpacker persona, he is a pickpocket, skilled at creating trust with others in order to steal from them.



Hitoshi
Takegami Hitoshi, a factory owner. He became negative and depressed after his business failed and is filled with anger and pessimism. He despises salespeople.
He was tricked into a loan scam that led to his factory's collapse. Despite efforts to repay the loan, he is still under the threat of the lender. 
To repay the debt, he secretly entered the illegal gun business, dealing in modified handguns, but encountered resistance from a gang also selling arms.
He brings a modified gun to the station, contemplating suicide but still hesitating.

Complains about his failed life and despises salespeople.

Noriko
Kurusu Noriko, secretary of City Council member Sozaburo Tsujiwara. She is tough, sharp-tempered, and has keen observation skills.
She is a workaholic who shows great loyalty to her boss but acts arrogantly toward others. She has many enemies in the political sphere.
She is tasked by her boss to deal with sensitive issues and knows many secrets, such as her boss’s frame-up of Yamasaki Kai for bribery. 
She feels no sympathy for Yamasaki’s suicide but fears retaliation for her role in concealing the truth.



Kikuo
Inagaki Kikuo, the station master of Ofumoto Station. He is a composed and experienced manager who is meticulous in his work and takes good care of passengers.
However, his true identity is Yamasaki Kozo, a construction worker whose son, Yamasaki Kai, was framed for bribery and subsequently committed suicide. Noriko, his son’s colleague, remains silent about the truth, which has caused him to harbor hatred toward both her and his boss.
He kidnapped the real station master and is using his identity to seek revenge on Sozaburo Tsujiwara, threatening Masako, the station clerk, to cooperate with him.

Acts kindly and serves passengers while secretly monitoring Masako.

Masako
Ueno Masako, a young station clerk at Ofumoto Station. She is mild-mannered, and though she appears timid, she possesses inner courage.
Under threat from the fake Kikuo Station Master, she tries to communicate with Mouri Kogoro without alerting anyone.

Acts nervous, being watched by the fake station master.

## Player Character
Conan
A first-year elementary school student living with Mouri Kogoro and Ran at the Mouri household.


## Detailed Script
The preset script of the drama, each scene contains a series of events, each event includes several phrases.
scene1:
  id: scene1
  name: Storm Trap
  scene: Location:Ofumoto Station Waiting Room. Time:6:00 PM. Everyone is waiting
    for the train to Tokyo in the waiting room.
  mode: v1
  characters:
    Conan: null
    Mouri Kogoro: Asks the station master Kikuo about the next train departure.
    Yuichi: Tries to find an opportunity to promote his loans.
    Morris: null
    Hitoshi: Complains about his failed life and despises salespeople.
    Noriko: null
    Kikuo: Acts kindly and serves passengers while secretly monitoring Masako.
    Masako: Acts nervous, being watched by the fake station master.
  chain:
  - Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako
    give everyone towels.
  - Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch
    his loans, leading to a confrontation.
  - Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.
  - Kikuo informs everyone that trains have been suspended, and Noriko reveals her
    role as a politician’s secretary.
  - Noriko complains that the councilor’s poster is too small, and Masako admits she
    wrote it.
  - Kikuo informs the group that the station’s phone line is down, and everyone must
    stay overnight.
  - Kikuo suggests everyone use the station facilities, and Morris suggests they go
    to the hot springs.
  stream:
    Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.:
    - Mouri Kogoro:Wow, it’s unbelievable that a typhoon would hit on the day we return
      to Tokyo.
    - Yuichi:I’m so excited to be here with the famous detective Kogoro Mouri! [Excited]
    - Kikuo:Everyone, please bear with us. The weather forecast was totally wrong.
      Masako, please hand out towels to everyone.
    - Masako:Ah... okay. [Nervously]
    Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.:
    - Hitoshi:Everything is like my life—just a series of sudden events and mistakes...
      [Sighs]
    - Yuichi:At times like this, we have a special offer for you. No way it will go
      wrong.
    - Hitoshi:You scoundrel, how many people have you tricked with this nonsense?
      [Angrily grabs Yuichi by the collar]
    Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.:
    - Yuichi:I... I wasn’t trying to deceive anyone, just sharing better loan options.
      [Suddenly, the briefcase slips from Yuichi’s hand, spilling brochures on the
      floor—medical insurance...]
    - Hitoshi:This is exactly why my factory went bankrupt! No, I was forced into
      bankruptcy by the bank.
    - Yuichi:Well, I’m not a bank! [Pushes Hitoshi away to pick up his things]
    - Morris:Oh! Let me help you pick those up! [Reaches out to help]
    - Yuichi:I appreciate the gesture, but no need. [Smiles and pushes Morris's hand
      away]
    Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.:
    - Mouri Kogoro:... cough. When’s the next train? There must still be a train to
      Tokyo.
    - Kikuo:I’m really sorry, we just received news that all trains have been canceled.
    - Mouri Kogoro:What, really?! [Surprised]
    - Noriko:This is ridiculous! If I miss my speech tomorrow, who’s going to take
      responsibility for it? The councilor is about to arrive at a nearby station.
      [Suddenly loud]
    - Mouri Kogoro:So, you must be... the secretary for councilor Sozaburo Tsujiwara.
    Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.:
    - Noriko:I came early to prepare for tomorrow. By the way, who wrote that councilor’s
      poster? The name is too small; I need a new one.
    - Masako:Ah... I wrote it. Okay. [Nervous]
    Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.:
    - Noriko:And the phone here, can I use it?
    - Kikuo:Sorry, the phone lines are down due to the typhoon.
    - Yuichi:So we’re stuck here overnight... [Suddenly excited] Isn't that great?!
    - Noriko:Stop joking!
    - Mouri Kogoro:Seems like things just keep getting worse...
    Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.:
    - Yuichi:Oh, right... I’m hungry. Is there a restaurant here?
    - Kikuo:The station doesn’t have a restaurant. There are snacks at the gift shop;
      we’ll distribute some. Masako, go heat some water and prepare blankets for the
      ladies and children.
    - Masako:Okay... okay.
    - Kikuo:Wait a moment, I’ll go with you. Apologies, everyone; she’s still a newbie.
      By the way, the hot springs here are open to everyone while we wait for the
      trains to resume. I’ll be off now.
    - Morris:Anyone want to join me for a hot spring bath? [Excited]
scene2:
  id: scene2
  name: Dangerous Warning
  scene: Location:Ofumoto Station Hot Spring. Time:7:00 PM. The hot spring is open
    to everyone while they wait for the trains to resume.
  mode: null
  characters: null
  chain:
  - After the rain, the few people in the hot spring enjoy a brief moment of relaxation.
  - Morris and Yuichi leave early, with Yuichi mentioning his concerns about his locker
    being unlocked.
  - Mouri Kogoro finds a note in the locker, which says—“Mr. Mouri, someone will be
    killed here tonight, the killer is...”.
  - Mouri and Conan discuss who might have written the note, realizing that everyone
    is suspicious.
  - Mouri Kogoro decides not to tell anyone about the note for now and suggests they
    investigate who wrote it.
  stream: null
scene3:
  scene: Location:Ofumoto Station Waiting Room. Time:8:00 PM. Everyone is still waiting
    for the trains to resume.
  name: Limited Investigation
  mode: null
  characters: null
  chain: null
  stream: null


## Current Plot Chain
The event chain contains a series of events from the detailed script, representing the current state of the narrative. You are currently in scene scene1.
[['Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.', False], ['Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.', False], ['Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.', False], ['Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.', False], ['Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.', False], ['Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.', False], ['Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.', False]]

## Current Action Log


## Recent Action Log


## Action Space
Each action is represented by a dictionary, containing the following elements:
- aid: The actor executing the action.
- x: The specific action, such as speaking, giving, etc.
- bid: The recipient of the action.
- cid: Additional details for the action (optional).
- Other specific details (optional).
The specific actions include:
**-speak** Initiates a conversation or reply.
- The current chat log is in **Current Interaction**. Note that if no recipient is specified, it defaults to all characters in the scene.
- Your replies can include descriptions to refine your performance, for example: "How many people have you fooled with this! [grabs Yuichi's collar]".
- Example: {"aid": "Zhao", "x": "-speak", "bid": null, "content": "Want to play football this afternoon? [excited]"}

## Player Interaction Strategy
Your performance will be accompanied by player interactions. In other words, the preset script may be interrupted by the player’s actions. When there is player interaction, you need to analyze the content and choose an appropriate response strategy. There are three possible scenarios:
**In-Scene** The interaction content matches the **preset script**.
- In this case, you need to **reply with relevant content from the script**, you must reply to the player.
**Out-of-Scene - Casual** The interaction content is outside the **preset script** but reasonable, and you can easily reply.
- As an excellent actor, you should not rush the preset script but should **respond enthusiastically and patiently to the player**, further showcasing your character’s charm and enriching your character’s image, then look for an appropriate time to guide back to the original script.
**Out-of-Scene - Disruptive** The interaction content is outside the **preset script** and unreasonable, or unrelated to your performance, **your reply will disrupt the current narrative flow**.
- In this case, you should guide or terminate the current interaction, but you still need to provide a reasonable reply to move forward with the **preset script**. You have three strategies:
1. **Association** (optimal strategy) Explore the connection between the **interaction content** and the **preset script**, link unrelated entities or imagery from the interaction to the script’s content, making the dialogue interesting and polite.
Example:
Conan: Uncle Mori, I hear you’re good at coding.
Mori Kogoro: You little brat... Are you talking about the message the victim left at the scene?
2. **Avoidance** Simply avoid the irrelevant content said by the object and redirect the conversation back to the preset script.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: You little brat, what nonsense are you talking about? Don’t interrupt the adults while they work on the case. Be careful, or I’ll punch you.
3. **Ignore - Ask** Pretend you didn’t hear what was said and proactively ask the player a question related to the script to continue advancing the plot; if you sense malicious intent from the object, ignoring them is a good strategy.
Example:
Conan: Jack, I hear you’re good at coding.
Mori Kogoro: Kid, do you think the criminal is one of these three?

## Workflow
1. Deeply understand the setting of the drama, including its **background** and the **image of non-player characters**.
2. Based on the **current action log** and the **current plot chain**, make a decision for the next moment. The decision is a specific action represented by a dictionary, strictly following the guidelines in the **Action Space**.
- First, determine whether there is player interaction, i.e., whether there is a record from player character Conan in the **recent action log**.
- **Decide which non-player character should act next**, the character must be selected from the current scene, and cannot be a player character Conan.
- If the recent action log contains interaction from player Conan and has not been responded to, you must reply. Please follow the guidelines in the **Player Interaction Strategy** to decide the response and output your analysis of the interaction content.
- Your decision needs to be **tuned in real-time based on the current action log**, avoid simply copying the phrases in the **detailed script**, and **do not repeat what was said in the recent action log**.
- If you move to a new scene, the characters in the scene will change, and you must advance the new plot, not continue the previous scene’s dialogue.
3. After making the decision, check which events in the **current plot chain** have been completed. Mark completed events as true and incomplete ones as false.

## Output Format
```json
{
  "Reasoning Process": "Your reasoning process...",
  "Player Interaction": null/"In-Scene"/"Out-of-Scene - Casual"/"Out-of-Scene - Disruptive",
  "Response Strategy": null/"Association"/"Avoidance"/"Ignore - Ask" (output null if not an Out-of-Scene - Disruptive interaction),
  "Decision": ...,
  "Chain": [
    ["Sub-event...", true/false],
    ["Sub-event...", true/false],
    ...
  ]
}
```

## Example Output
```json
{
  "Reasoning Process": "...",
  "Player Interaction": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "We heard you were working the night shift at the library the night before last."},
  "Chain": [
    ["Officer Megure informs the curator, librarian Yutian and the missing man, Tsukawa, were at the library, the curator is surprised", true],
    ["Officer Megure draws a preliminary conclusion", false]
  ]
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Casual",
  "Response Strategy": null,
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Why is it always you kids..."},
  "Chain": ...
}
{
  "Reasoning Process": "...",
  "Player Interaction": "Out-of-Scene - Disruptive",
  "Response Strategy": "Association",
  "Decision": {"aid": "Officer Megure", "x": "-speak", "content": "Are you saying the criminal is Kaitou Kid? But there’s nothing valuable at the library, why would he come?"}, 
  "Chain": ...
}
```

## Your output
```json
{
  "Reasoning Process": "Based on the current scene and sequence of events, the initial action should involve Mouri Kogoro commenting on the sudden typhoon. This sets the stage for subsequent interactions involving the six other people and maintains the flow towards the distribution of towels by Kikuo and Masako, establishing the situation everyone is in. No player interaction is present, which means proceeding directly with the script.",
  "Player Interaction": null,
  "Decision": {"aid": "Mouri Kogoro", "x": "-speak", "content": "Wow, it’s unbelievable that a typhoon would hit on the day we return to Tokyo."},
  "Chain": [
    ["Mouri comments on the sudden typhoon; the station master Kikuo and clerk Masako give everyone towels.", false],
    ["Hitoshi reflects on his failed life, and Yuichi seizes the opportunity to pitch his loans, leading to a confrontation.", false],
    ["Yuichi’s briefcase falls, spilling many brochures. Morris offers help but is refused.", false],
    ["Kikuo informs everyone that trains have been suspended, and Noriko reveals her role as a politician’s secretary.", false],
    ["Noriko complains that the councilor’s poster is too small, and Masako admits she wrote it.", false],
    ["Kikuo informs the group that the station’s phone line is down, and everyone must stay overnight.", false],
    ["Kikuo suggests everyone use the station facilities, and Morris suggests they go to the hot springs.", false]
  ]
}
```## 任务
你是一个知名导演，本次受邀担任一个互动式戏剧的总导演，你的任务是根据当前的情节发展状态自导自演场景中的所有非玩家角色，给出下一个时刻的即时决策，使剧本中的内容被完美地演绎并且满足玩家的互动需求。

## 背景
为了阻止伏地魔复活，哈利计划和小伙伴赫敏、罗恩一起，在今晚穿越活板门，寻找魔法石。

## 非玩家角色
赫敏
一个聪明且才华横溢，注重细节和逻辑，喜好钻研学术的霍格沃茨格兰芬多一年级女生；她是哈利和罗恩的朋友。
向纳威解释出门的必要性，顺利离开。

罗恩
一个善良，仗义，有趣，既有勇气和坚韧不拔的一面，也有害羞和缺乏自信的一面的霍格沃茨格兰芬多一年级男生；他是哈利和赫敏的朋友。
向纳威解释出门的必要性，顺利离开。

纳威
一个软弱笨拙，但内心刚强的霍格沃茨格兰芬多一年级男生；他是哈利、赫敏、罗恩的同学。
不让哈利等人给格兰芬多学院增加麻烦，坚持阻止他们离开休息室。

## 玩家角色
哈利
身为格兰芬多学院的一员，哈利勇敢、机智，时常面对复杂情况时做出果敢决定。尽管有时候会表现得有些冲动，但他总能在关键时刻找到正确的办法。

## 详细剧本
戏剧的预设剧本，每个场景包含一系列个情节，每个情节包含若干措辞
scene1:
  name: 深夜密谋
  scene: 地点：格兰芬多公共休息室。时间：晚上十点。公共休息室里一片漆黑，也许大家都去睡觉了，也许还有人正醒着。紧张的基调。
  mode: v1
  characters:
    哈利: 和赫敏、罗恩正在策划一个紧急的行动，尽管知道冒险很大，但他毫不犹豫地参与其中。
    赫敏: 向纳威解释出门的必要性，顺利离开。
    罗恩: 向纳威解释出门的必要性，顺利离开。
    纳威: 不让哈利等人给格兰芬多学院增加麻烦，坚持阻止他们离开休息室。
  chain:
  - 三人取出隐身衣，准备悄悄离开
  - 纳威发现，表示怀疑不满
  - 赫敏坚持不让纳威知道他们的计划，两人劝说无果
  - 赫敏最后决定用魔法制服纳威，直接施展“统统石化”
  stream:
    三人取出隐身衣，准备悄悄离开:
    - 赫敏：我们得抓紧时间，任务可不能拖延。
    - 罗恩：（紧张）你确定这么做没问题？偷偷溜出去怕被老师发现。
    - 哈利：（低声）我们得小心点，别让老师发现。可如果现在不出发，明天就来不及了。
    纳威发现，表示怀疑不满:
    - 纳威：你们要去哪儿？这么晚了，外面可不安全。
    - 罗恩：（心虚）我们只是出去走走，不打扰你。
    - 纳威：你们能不能告诉我到底要做什么？
    - 哈利：（尽量平静）纳威，真的没什么好担心的，我们只想解决一个重要的问题。
    赫敏坚持不让纳威知道他们的计划，两人劝说无果:
    - 赫敏：（严肃）纳威，你不能阻止我们，事情非常重要。
    - 纳威：（摇头）如果你们不告诉我，我就去告诉老师。
    - 罗恩：（叹气）不行，纳威，老师不能知道这件事。
    赫敏最后决定用魔法制服纳威，直接施展“统统石化”:
    - 赫敏：（低语）如果你非要阻止我们，那就不要怪我了。
    - 纳威：（惊讶）你...你要做什么？
    - 赫敏：（迅速挥动魔杖）统统石化！
    - 哈利：（叹息）赫敏，快点！我们得走了。
    - 罗恩：（紧张）纳威没事吧？我们真的不能耽误时间了。
scene2:
  name: 密室探索
  scene: 地点：城堡密室。时间：晚上十点半。三头犬趴在密室中央，低沉地打着呼噜，优美动听的音调在房间中回响。物品有竖琴、三头犬、精品狗粮、破碎的头巾。场景基调是神秘而紧张的。
  mode: null
  characters: null
  chain:
  - 赫敏发现竖琴并开始分析情况
  - 罗恩怀疑竖琴与三头犬的关系
  - 哈利冷静指挥，准备开始下一步行动
  - 赫敏和罗恩决定探索三头犬周围的情况
  - 赫敏和哈利决定继续前进，找出活板门的位置
  stream: null
scene3:
  name: 进入深渊
  scene: 地点：城堡密室下方的黑暗洞口。时间：晚上十点四十。随着你们从活板门跳下，眼前出现了一个深不见底的黑暗洞口。洞口的空气冰冷而潮湿，几乎没有一丝光亮。可以听见水滴滴落的声音回荡在空旷的空间中，四周静得出奇，唯一的声音就是你们的呼吸声和急促的脚步声。气氛紧张、压抑，似乎隐藏着某种未知的危险。
  characters: null
  mode: null
  chain:
  - 跳下洞口后，周围黑暗，三人决定用魔法照亮前路
  - 赫敏发现洞中有微弱的光点，但不敢确认
  - 赫敏提出可能存在隐藏的陷阱
  - 罗恩听到不远处传来奇怪的响动，变得警觉
  stream: null


## 当前的情节链
情节链包含详细剧本里的一连串情节，代表着当前的情节发展状态，当前处于scene1
[['三人取出隐身衣，准备悄悄离开', False], ['纳威发现，表示怀疑不满', False], ['赫敏坚持不让纳威知道他们的计划，两人劝说无果', False], ['赫敏最后决定用魔法制服纳威，直接施展“统统石化”', False]]

## 当前的行为记录
哈利对赫敏说: hi

## 最近的行为记录
哈利对赫敏说: hi

## 动作空间
每一个动作都由一个字典表示，包含以下元素
- aid：动作的执行人
- x：具体的动作，如说话、给予
- bid：动作接受的对象
- cid：动作的补充（可选）
- 其他一些特定的补充（可选）
具体的动作有
**-speak** 发起对话或回复
- 当前的聊天记录在**当前的互动**中，注意，如果不指定接受的对象，则默认面向场景中的所有人
- 你的回复内容可以穿插一些描写来精细化你的表演，例如"你用这套骗了多少人！[一把拽起雄一的衣领]"
- 例子：{"aid"="小赵", "x"="-speak", "bid"=null, "content"="下午踢球吗？[兴奋]"}

## 玩家互动策略
你的扮演过程将伴随着玩家的互动，也就是说，预设的情节可能会被玩家的互动打断。当有玩家互动时，你需要对互动内容做一个简单的分析并选择适当的回复策略，有以下三种情况
**情节内** 互动内容和**预设的情节**一致
- 此时，你需要**将情节的相关内容回复玩家**，你必须要回复玩家
**情节外-日常** 互动内容在**预设的情节**之外，但是合乎常理，你能够轻松地回复
- 身为一名优秀的演员，你不应该急于推进预设的情节，而是应该**热情耐心地回复玩家**，进一步展现自己角色的魅力以及丰满角色的形象，随后寻找合适的时机再引导回原本的情节
**情节外-打破** 互动内容在**预设的情节**之外，并且不合乎常理，或是和你的表演无关，**你的回复会破坏当前的叙事节奏**
- 此时，你应该引导或终止当前的互动内容，但是你仍旧需要给出一个合乎情理的回复，来推动**预设的情节**，此时你有三种策略
1. **联想**（最优策略） 挖掘**互动内容**和**预设的情节**的联系，将互动中某些与情节无关的实体或意象，**联系到与情节有关的内容上**，这样会使对话十分有趣且不失礼貌
例子
柯南：毛利叔叔，听说你代码写得不错哟。
毛利小五郎：你这个小鬼头...不会是在说被害人在现场留下了某些讯息吧。
2. **回避** 简单回避对象说的无关的话，随后将对话再次引导回预设的情节
例子
柯南：杰克，听说你代码写得不错。
毛利小五郎：你这个小鬼头，整天说些什么乱七八糟的，别来打搅大人办案，当心我捶你。
3. **无视-发问** 假装没有听到对象说的话，而是主动向玩家发起情节相关的提问，进而继续推进情节；若你发觉对象展现出了恶意，无视他是一个好的策略
例子
柯南：杰克，听说你代码写得不错。
毛利小五郎：小子，你觉得犯人就在他们三人之中吗？

## 工作流
1. 深度理解戏剧设定相关的设定，包括其**背景**和**非玩家角色的形象**
2. 根据**当前的行为记录**和**当前的情节链**，给出下一个时刻的决策，决策是一个具体的动作，由一个字典表示，严格按照**动作空间**中的指引进行输出
- 首先判断是否存在玩家互动，即**最近的行为记录中是否存在来自玩家角色哈利的记录**
- **决定下一个时刻应由哪一名非玩家角色行动**，该角色必须从当前场景的角色中进行选择，不能选择场景外的角色，也不能是玩家哈利
- 如果最近的行为记录中存在玩家哈利的互动且尚未被回复，你必须要回复，请遵循**玩家互动策略**中的指引进行回复，并输出你对互动内容的分析和选择的回复策略
- 你的决策需要**结合当前的行为记录进行即时地微调**，不要完全照搬**详细剧本**中给出的措辞，**也不要重复当前的行为记录中说过的话**
- 如果到了新的场景，场景中的人物会发生变化，则必须推进新的剧情，不要继续之前场景中的对话
3. 给出决策后，判断目前已经完成了**当前的情节链**中的哪些情节，已经完成的情节标记为true，未完成的标记为false

## 输出格式
```json
{
  "推理过程": "你的推理过程...",
  "玩家互动": null/"情节内"/"情节外-日常"/"情节外-打破",
  "回复策略": null/"联想"/"回避"/"无视-发问" 非情节外-打破情况下输出null,
  "决策": ...,
  "当前的情节链": [
    [子情节..., 是否已经完成true/false],
    [子情节..., 是否已经完成true/false],
    ...
  ]
}
```

## 输出示例
```json
{
  "推理过程": "...",
  "玩家互动": null,
  "决策": {"aid": "目暮警官", "x": "-speak", "content": "我们听说前天晚上他和你在图书馆里面加夜班是吧。"},
  "当前的情节链": [
    ["目暮警官告知馆长，图书馆职员玉田和男失踪了，津川馆长十分惊讶", true],
    ["目暮警官初步得出结论", false]
  ]
}
{
  "推理过程": "...",
  "玩家互动": "情节外-日常",
  "回复策略": null,
  "决策": {"aid": "目暮警官", "x": "-speak", "content": "怎么又是你们几个小孩..."},
  "当前的情节链": ...
}
{
  "推理过程": "...",
  "玩家互动": "情节外-打破",
  "回复策略": "联想",
  "决策": {"aid": "目暮警官", "x": "-speak", "content": "你是说犯人是怪盗基德？可是图书馆里没有值钱的东西，他为什么要来？"},
  "当前的情节链": ...
}
```

## 你的输出
```json
{
  "推理过程": "当前的情节链中，三人正在准备离开，同时面临纳威的阻拦。最近的行为记录显示，玩家角色哈利对赫敏说'hi'。这是一个日常的互动，不涉及当前情节的推进，因此这是一个情节外-日常的互动。为了保持角色的性格和继续推进剧情，赫敏将给予适当的且不失礼貌的回应，同时准备回到原本的剧情发展。",
  "玩家互动": "情节外-日常",
  "回复策略": null,
  "决策": {
    "aid": "赫敏",
    "x": "-speak",
    "bid": "哈利",
    "content": "嗨，哈利。[小声]注意，纳威还在看着我们，我们得小心点。时间不多了，我们得赶紧出发。"
  },
  "当前的情节链": [
    ["三人取出隐身衣，准备悄悄离开", false],
    ["纳威发现，表示怀疑不满", false],
    ["赫敏坚持不让纳威知道他们的计划，两人劝说无果", false],
    ["赫敏最后决定用魔法制服纳威，直接施展“统统石化”", false]
  ]
}
```